{"version":3,"sources":["../../src/prisma/prisma.service.ts"],"sourcesContent":["import { Injectable, OnModuleInit, OnModuleDestroy } from '@nestjs/common';\nimport { PrismaClient } from '@prisma/client';\nimport { PrismaPg } from '@prisma/adapter-pg';\nimport { Pool } from 'pg';\n\n@Injectable()\nexport class PrismaService extends PrismaClient implements OnModuleInit, OnModuleDestroy {\n  private pool: Pool;\n\n  constructor() {\n    const connectionString = process.env.DATABASE_URL || 'postgresql://postgres:1234@localhost:5432/lexacut?schema=public';\n    const pool = new Pool({ connectionString });\n    const adapter = new PrismaPg(pool);\n    \n    super({ adapter });\n    this.pool = pool;\n  }\n\n  async onModuleInit() {\n    await this.$connect();\n  }\n\n  async onModuleDestroy() {\n    await this.$disconnect();\n    await this.pool.end();\n  }\n}\n\n"],"names":["PrismaService","PrismaClient","onModuleInit","$connect","onModuleDestroy","$disconnect","pool","end","connectionString","process","env","DATABASE_URL","Pool","adapter","PrismaPg"],"mappings":";;;;+BAMaA;;;eAAAA;;;wBAN6C;wBAC7B;2BACJ;oBACJ;;;;;;;;;;AAGd,IAAA,AAAMA,gBAAN,MAAMA,sBAAsBC,oBAAY;IAY7C,MAAMC,eAAe;QACnB,MAAM,IAAI,CAACC,QAAQ;IACrB;IAEA,MAAMC,kBAAkB;QACtB,MAAM,IAAI,CAACC,WAAW;QACtB,MAAM,IAAI,CAACC,IAAI,CAACC,GAAG;IACrB;IAhBA,aAAc;QACZ,MAAMC,mBAAmBC,QAAQC,GAAG,CAACC,YAAY,IAAI;QACrD,MAAML,OAAO,IAAIM,QAAI,CAAC;YAAEJ;QAAiB;QACzC,MAAMK,UAAU,IAAIC,mBAAQ,CAACR;QAE7B,KAAK,CAAC;YAAEO;QAAQ;QAChB,IAAI,CAACP,IAAI,GAAGA;IACd;AAUF"}