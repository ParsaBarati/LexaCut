{"version":3,"sources":["../../../src/modules/fittings/fittings.controller.ts"],"sourcesContent":["import {\n  Controller,\n  Get,\n  Post,\n  Put,\n  Delete,\n  Body,\n  Param,\n  Query,\n  HttpCode,\n  HttpStatus,\n} from '@nestjs/common';\nimport { ApiTags, ApiOperation, ApiResponse } from '@nestjs/swagger';\nimport { PrismaService } from '../../prisma/prisma.service';\nimport { CreateFittingDto } from './dto/create-fitting.dto';\nimport { UpdateFittingDto } from './dto/update-fitting.dto';\n\n@ApiTags('Fittings Management')\n@Controller('api/v1/fittings')\nexport class FittingsController {\n  constructor(private readonly prisma: PrismaService) {}\n\n  @Get()\n  @ApiOperation({ summary: 'Get all fittings' })\n  @ApiResponse({ status: 200, description: 'Returns all fittings' })\n  async findAll(@Query('active') active?: string) {\n    const where = active === 'true' ? { isActive: true } : {};\n    return this.prisma.fitting.findMany({\n      where,\n      orderBy: { createdAt: 'desc' },\n    });\n  }\n\n  @Get(':id')\n  @ApiOperation({ summary: 'Get fitting by ID' })\n  @ApiResponse({ status: 200, description: 'Returns the fitting' })\n  @ApiResponse({ status: 404, description: 'Fitting not found' })\n  async findOne(@Param('id') id: string) {\n    return this.prisma.fitting.findUniqueOrThrow({\n      where: { id },\n    });\n  }\n\n  @Post()\n  @ApiOperation({ summary: 'Create a new fitting' })\n  @ApiResponse({ status: 201, description: 'Fitting created successfully' })\n  @ApiResponse({ status: 400, description: 'Invalid input' })\n  async create(@Body() createDto: CreateFittingDto) {\n    return this.prisma.fitting.create({\n      data: createDto,\n    });\n  }\n\n  @Post('bulk')\n  @ApiOperation({ summary: 'Bulk create fittings' })\n  @ApiResponse({ status: 201, description: 'Fittings created successfully' })\n  @ApiResponse({ status: 400, description: 'Invalid input' })\n  async bulkCreate(@Body() createDtos: CreateFittingDto[]) {\n    const result = await this.prisma.fitting.createMany({\n      data: createDtos,\n      skipDuplicates: true,\n    });\n    return { count: result.count, message: `Successfully created ${result.count} fittings` };\n  }\n\n  @Put(':id')\n  @ApiOperation({ summary: 'Update a fitting' })\n  @ApiResponse({ status: 200, description: 'Fitting updated successfully' })\n  @ApiResponse({ status: 404, description: 'Fitting not found' })\n  async update(@Param('id') id: string, @Body() updateDto: UpdateFittingDto) {\n    return this.prisma.fitting.update({\n      where: { id },\n      data: updateDto,\n    });\n  }\n\n  @Delete(':id')\n  @HttpCode(HttpStatus.NO_CONTENT)\n  @ApiOperation({ summary: 'Delete a fitting (soft delete)' })\n  @ApiResponse({ status: 204, description: 'Fitting deleted successfully' })\n  @ApiResponse({ status: 404, description: 'Fitting not found' })\n  async remove(@Param('id') id: string) {\n    await this.prisma.fitting.update({\n      where: { id },\n      data: { isActive: false },\n    });\n  }\n}\n\n"],"names":["FittingsController","findAll","active","where","isActive","prisma","fitting","findMany","orderBy","createdAt","findOne","id","findUniqueOrThrow","create","createDto","data","bulkCreate","createDtos","result","createMany","skipDuplicates","count","message","update","updateDto","remove","summary","status","description","NO_CONTENT"],"mappings":";;;;+BAmBaA;;;eAAAA;;;wBARN;yBAC4C;+BACrB;kCACG;kCACA;;;;;;;;;;;;;;;AAI1B,IAAA,AAAMA,qBAAN,MAAMA;IAGX,MAGMC,QAAQ,AAAiBC,MAAe,EAAE;QAC9C,MAAMC,QAAQD,WAAW,SAAS;YAAEE,UAAU;QAAK,IAAI,CAAC;QACxD,OAAO,IAAI,CAACC,MAAM,CAACC,OAAO,CAACC,QAAQ,CAAC;YAClCJ;YACAK,SAAS;gBAAEC,WAAW;YAAO;QAC/B;IACF;IAEA,MAIMC,QAAQ,AAAaC,EAAU,EAAE;QACrC,OAAO,IAAI,CAACN,MAAM,CAACC,OAAO,CAACM,iBAAiB,CAAC;YAC3CT,OAAO;gBAAEQ;YAAG;QACd;IACF;IAEA,MAIME,OAAO,AAAQC,SAA2B,EAAE;QAChD,OAAO,IAAI,CAACT,MAAM,CAACC,OAAO,CAACO,MAAM,CAAC;YAChCE,MAAMD;QACR;IACF;IAEA,MAIME,WAAW,AAAQC,UAA8B,EAAE;QACvD,MAAMC,SAAS,MAAM,IAAI,CAACb,MAAM,CAACC,OAAO,CAACa,UAAU,CAAC;YAClDJ,MAAME;YACNG,gBAAgB;QAClB;QACA,OAAO;YAAEC,OAAOH,OAAOG,KAAK;YAAEC,SAAS,CAAC,qBAAqB,EAAEJ,OAAOG,KAAK,CAAC,SAAS,CAAC;QAAC;IACzF;IAEA,MAIME,OAAO,AAAaZ,EAAU,EAAE,AAAQa,SAA2B,EAAE;QACzE,OAAO,IAAI,CAACnB,MAAM,CAACC,OAAO,CAACiB,MAAM,CAAC;YAChCpB,OAAO;gBAAEQ;YAAG;YACZI,MAAMS;QACR;IACF;IAEA,MAKMC,OAAO,AAAad,EAAU,EAAE;QACpC,MAAM,IAAI,CAACN,MAAM,CAACC,OAAO,CAACiB,MAAM,CAAC;YAC/BpB,OAAO;gBAAEQ;YAAG;YACZI,MAAM;gBAAEX,UAAU;YAAM;QAC1B;IACF;IAlEA,YAAY,AAAiBC,MAAqB,CAAE;aAAvBA,SAAAA;IAAwB;AAmEvD;;;;QAhEkBqB,SAAS;;;QACVC,QAAQ;QAAKC,aAAa;;;;;;;;;;;;QAUzBF,SAAS;;;QACVC,QAAQ;QAAKC,aAAa;;;QAC1BD,QAAQ;QAAKC,aAAa;;;;;;;;;;;;QAQzBF,SAAS;;;QACVC,QAAQ;QAAKC,aAAa;;;QAC1BD,QAAQ;QAAKC,aAAa;;;;;;;;;;;;QAQzBF,SAAS;;;QACVC,QAAQ;QAAKC,aAAa;;;QAC1BD,QAAQ;QAAKC,aAAa;;;;;;;;;;;;QAUzBF,SAAS;;;QACVC,QAAQ;QAAKC,aAAa;;;QAC1BD,QAAQ;QAAKC,aAAa;;;;;;;;;;;;;6CASpBC;;QACLH,SAAS;;;QACVC,QAAQ;QAAKC,aAAa;;;QAC1BD,QAAQ;QAAKC,aAAa"}