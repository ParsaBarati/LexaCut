{"version":3,"sources":["../../../src/modules/materials/materials.controller.ts"],"sourcesContent":["import {\n  Controller,\n  Get,\n  Post,\n  Put,\n  Delete,\n  Body,\n  Param,\n  Query,\n  HttpCode,\n  HttpStatus,\n} from '@nestjs/common';\nimport { ApiTags, ApiOperation, ApiResponse } from '@nestjs/swagger';\nimport { PrismaService } from '../../prisma/prisma.service';\nimport { CreateMaterialDto } from './dto/create-material.dto';\nimport { UpdateMaterialDto } from './dto/update-material.dto';\n\n@ApiTags('Materials Management')\n@Controller('api/v1/materials')\nexport class MaterialsController {\n  constructor(private readonly prisma: PrismaService) {}\n\n  @Get()\n  @ApiOperation({ summary: 'Get all materials' })\n  @ApiResponse({ status: 200, description: 'Returns all materials' })\n  async findAll(@Query('active') active?: string) {\n    const where = active === 'true' ? { isActive: true } : {};\n    return this.prisma.material.findMany({\n      where,\n      orderBy: { createdAt: 'desc' },\n    });\n  }\n\n  @Get(':id')\n  @ApiOperation({ summary: 'Get material by ID' })\n  @ApiResponse({ status: 200, description: 'Returns the material' })\n  @ApiResponse({ status: 404, description: 'Material not found' })\n  async findOne(@Param('id') id: string) {\n    return this.prisma.material.findUniqueOrThrow({\n      where: { id },\n    });\n  }\n\n  @Post()\n  @ApiOperation({ summary: 'Create a new material' })\n  @ApiResponse({ status: 201, description: 'Material created successfully' })\n  @ApiResponse({ status: 400, description: 'Invalid input' })\n  async create(@Body() createDto: CreateMaterialDto) {\n    return this.prisma.material.create({\n      data: createDto,\n    });\n  }\n\n  @Post('bulk')\n  @ApiOperation({ summary: 'Bulk create materials' })\n  @ApiResponse({ status: 201, description: 'Materials created successfully' })\n  @ApiResponse({ status: 400, description: 'Invalid input' })\n  async bulkCreate(@Body() createDtos: CreateMaterialDto[]) {\n    const result = await this.prisma.material.createMany({\n      data: createDtos,\n      skipDuplicates: true,\n    });\n    return { count: result.count, message: `Successfully created ${result.count} materials` };\n  }\n\n  @Put(':id')\n  @ApiOperation({ summary: 'Update a material' })\n  @ApiResponse({ status: 200, description: 'Material updated successfully' })\n  @ApiResponse({ status: 404, description: 'Material not found' })\n  async update(@Param('id') id: string, @Body() updateDto: UpdateMaterialDto) {\n    return this.prisma.material.update({\n      where: { id },\n      data: updateDto,\n    });\n  }\n\n  @Delete(':id')\n  @HttpCode(HttpStatus.NO_CONTENT)\n  @ApiOperation({ summary: 'Delete a material (soft delete)' })\n  @ApiResponse({ status: 204, description: 'Material deleted successfully' })\n  @ApiResponse({ status: 404, description: 'Material not found' })\n  async remove(@Param('id') id: string) {\n    // Soft delete by setting isActive to false\n    await this.prisma.material.update({\n      where: { id },\n      data: { isActive: false },\n    });\n  }\n}\n\n"],"names":["MaterialsController","findAll","active","where","isActive","prisma","material","findMany","orderBy","createdAt","findOne","id","findUniqueOrThrow","create","createDto","data","bulkCreate","createDtos","result","createMany","skipDuplicates","count","message","update","updateDto","remove","summary","status","description","NO_CONTENT"],"mappings":";;;;+BAmBaA;;;eAAAA;;;wBARN;yBAC4C;+BACrB;mCACI;mCACA;;;;;;;;;;;;;;;AAI3B,IAAA,AAAMA,sBAAN,MAAMA;IAGX,MAGMC,QAAQ,AAAiBC,MAAe,EAAE;QAC9C,MAAMC,QAAQD,WAAW,SAAS;YAAEE,UAAU;QAAK,IAAI,CAAC;QACxD,OAAO,IAAI,CAACC,MAAM,CAACC,QAAQ,CAACC,QAAQ,CAAC;YACnCJ;YACAK,SAAS;gBAAEC,WAAW;YAAO;QAC/B;IACF;IAEA,MAIMC,QAAQ,AAAaC,EAAU,EAAE;QACrC,OAAO,IAAI,CAACN,MAAM,CAACC,QAAQ,CAACM,iBAAiB,CAAC;YAC5CT,OAAO;gBAAEQ;YAAG;QACd;IACF;IAEA,MAIME,OAAO,AAAQC,SAA4B,EAAE;QACjD,OAAO,IAAI,CAACT,MAAM,CAACC,QAAQ,CAACO,MAAM,CAAC;YACjCE,MAAMD;QACR;IACF;IAEA,MAIME,WAAW,AAAQC,UAA+B,EAAE;QACxD,MAAMC,SAAS,MAAM,IAAI,CAACb,MAAM,CAACC,QAAQ,CAACa,UAAU,CAAC;YACnDJ,MAAME;YACNG,gBAAgB;QAClB;QACA,OAAO;YAAEC,OAAOH,OAAOG,KAAK;YAAEC,SAAS,CAAC,qBAAqB,EAAEJ,OAAOG,KAAK,CAAC,UAAU,CAAC;QAAC;IAC1F;IAEA,MAIME,OAAO,AAAaZ,EAAU,EAAE,AAAQa,SAA4B,EAAE;QAC1E,OAAO,IAAI,CAACnB,MAAM,CAACC,QAAQ,CAACiB,MAAM,CAAC;YACjCpB,OAAO;gBAAEQ;YAAG;YACZI,MAAMS;QACR;IACF;IAEA,MAKMC,OAAO,AAAad,EAAU,EAAE;QACpC,2CAA2C;QAC3C,MAAM,IAAI,CAACN,MAAM,CAACC,QAAQ,CAACiB,MAAM,CAAC;YAChCpB,OAAO;gBAAEQ;YAAG;YACZI,MAAM;gBAAEX,UAAU;YAAM;QAC1B;IACF;IAnEA,YAAY,AAAiBC,MAAqB,CAAE;aAAvBA,SAAAA;IAAwB;AAoEvD;;;;QAjEkBqB,SAAS;;;QACVC,QAAQ;QAAKC,aAAa;;;;;;;;;;;;QAUzBF,SAAS;;;QACVC,QAAQ;QAAKC,aAAa;;;QAC1BD,QAAQ;QAAKC,aAAa;;;;;;;;;;;;QAQzBF,SAAS;;;QACVC,QAAQ;QAAKC,aAAa;;;QAC1BD,QAAQ;QAAKC,aAAa;;;;;;;;;;;;QAQzBF,SAAS;;;QACVC,QAAQ;QAAKC,aAAa;;;QAC1BD,QAAQ;QAAKC,aAAa;;;;;;;;;;;;QAUzBF,SAAS;;;QACVC,QAAQ;QAAKC,aAAa;;;QAC1BD,QAAQ;QAAKC,aAAa;;;;;;;;;;;;;6CASpBC;;QACLH,SAAS;;;QACVC,QAAQ;QAAKC,aAAa;;;QAC1BD,QAAQ;QAAKC,aAAa"}