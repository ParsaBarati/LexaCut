{"version":3,"sources":["../../../src/modules/cnc-operations/cnc-operations.controller.ts"],"sourcesContent":["import {\n  Controller,\n  Get,\n  Post,\n  Put,\n  Delete,\n  Body,\n  Param,\n  Query,\n  HttpCode,\n  HttpStatus,\n} from '@nestjs/common';\nimport { ApiTags, ApiOperation, ApiResponse } from '@nestjs/swagger';\nimport { PrismaService } from '../../prisma/prisma.service';\nimport { CreateCNCOperationDto } from './dto/create-cnc-operation.dto';\nimport { UpdateCNCOperationDto } from './dto/update-cnc-operation.dto';\n\n@ApiTags('CNC Operations Management')\n@Controller('api/v1/cnc-operations')\nexport class CNCOperationsController {\n  constructor(private readonly prisma: PrismaService) {}\n\n  @Get()\n  @ApiOperation({ summary: 'Get all CNC operations' })\n  @ApiResponse({ status: 200, description: 'Returns all CNC operations' })\n  async findAll(@Query('active') active?: string) {\n    const where = active === 'true' ? { isActive: true } : {};\n    return this.prisma.cNCOperation.findMany({\n      where,\n      orderBy: { createdAt: 'desc' },\n    });\n  }\n\n  @Get(':id')\n  @ApiOperation({ summary: 'Get CNC operation by ID' })\n  @ApiResponse({ status: 200, description: 'Returns the CNC operation' })\n  @ApiResponse({ status: 404, description: 'CNC operation not found' })\n  async findOne(@Param('id') id: string) {\n    return this.prisma.cNCOperation.findUniqueOrThrow({\n      where: { id },\n    });\n  }\n\n  @Post()\n  @ApiOperation({ summary: 'Create a new CNC operation' })\n  @ApiResponse({ status: 201, description: 'CNC operation created successfully' })\n  @ApiResponse({ status: 400, description: 'Invalid input' })\n  async create(@Body() createDto: CreateCNCOperationDto) {\n    return this.prisma.cNCOperation.create({\n      data: createDto,\n    });\n  }\n\n  @Post('bulk')\n  @ApiOperation({ summary: 'Bulk create CNC operations' })\n  @ApiResponse({ status: 201, description: 'CNC operations created successfully' })\n  @ApiResponse({ status: 400, description: 'Invalid input' })\n  async bulkCreate(@Body() createDtos: CreateCNCOperationDto[]) {\n    const result = await this.prisma.cNCOperation.createMany({\n      data: createDtos,\n      skipDuplicates: true,\n    });\n    return { count: result.count, message: `Successfully created ${result.count} CNC operations` };\n  }\n\n  @Put(':id')\n  @ApiOperation({ summary: 'Update a CNC operation' })\n  @ApiResponse({ status: 200, description: 'CNC operation updated successfully' })\n  @ApiResponse({ status: 404, description: 'CNC operation not found' })\n  async update(@Param('id') id: string, @Body() updateDto: UpdateCNCOperationDto) {\n    return this.prisma.cNCOperation.update({\n      where: { id },\n      data: updateDto,\n    });\n  }\n\n  @Delete(':id')\n  @HttpCode(HttpStatus.NO_CONTENT)\n  @ApiOperation({ summary: 'Delete a CNC operation (soft delete)' })\n  @ApiResponse({ status: 204, description: 'CNC operation deleted successfully' })\n  @ApiResponse({ status: 404, description: 'CNC operation not found' })\n  async remove(@Param('id') id: string) {\n    await this.prisma.cNCOperation.update({\n      where: { id },\n      data: { isActive: false },\n    });\n  }\n}\n\n"],"names":["CNCOperationsController","findAll","active","where","isActive","prisma","cNCOperation","findMany","orderBy","createdAt","findOne","id","findUniqueOrThrow","create","createDto","data","bulkCreate","createDtos","result","createMany","skipDuplicates","count","message","update","updateDto","remove","summary","status","description","NO_CONTENT"],"mappings":";;;;+BAmBaA;;;eAAAA;;;wBARN;yBAC4C;+BACrB;uCACQ;uCACA;;;;;;;;;;;;;;;AAI/B,IAAA,AAAMA,0BAAN,MAAMA;IAGX,MAGMC,QAAQ,AAAiBC,MAAe,EAAE;QAC9C,MAAMC,QAAQD,WAAW,SAAS;YAAEE,UAAU;QAAK,IAAI,CAAC;QACxD,OAAO,IAAI,CAACC,MAAM,CAACC,YAAY,CAACC,QAAQ,CAAC;YACvCJ;YACAK,SAAS;gBAAEC,WAAW;YAAO;QAC/B;IACF;IAEA,MAIMC,QAAQ,AAAaC,EAAU,EAAE;QACrC,OAAO,IAAI,CAACN,MAAM,CAACC,YAAY,CAACM,iBAAiB,CAAC;YAChDT,OAAO;gBAAEQ;YAAG;QACd;IACF;IAEA,MAIME,OAAO,AAAQC,SAAgC,EAAE;QACrD,OAAO,IAAI,CAACT,MAAM,CAACC,YAAY,CAACO,MAAM,CAAC;YACrCE,MAAMD;QACR;IACF;IAEA,MAIME,WAAW,AAAQC,UAAmC,EAAE;QAC5D,MAAMC,SAAS,MAAM,IAAI,CAACb,MAAM,CAACC,YAAY,CAACa,UAAU,CAAC;YACvDJ,MAAME;YACNG,gBAAgB;QAClB;QACA,OAAO;YAAEC,OAAOH,OAAOG,KAAK;YAAEC,SAAS,CAAC,qBAAqB,EAAEJ,OAAOG,KAAK,CAAC,eAAe,CAAC;QAAC;IAC/F;IAEA,MAIME,OAAO,AAAaZ,EAAU,EAAE,AAAQa,SAAgC,EAAE;QAC9E,OAAO,IAAI,CAACnB,MAAM,CAACC,YAAY,CAACiB,MAAM,CAAC;YACrCpB,OAAO;gBAAEQ;YAAG;YACZI,MAAMS;QACR;IACF;IAEA,MAKMC,OAAO,AAAad,EAAU,EAAE;QACpC,MAAM,IAAI,CAACN,MAAM,CAACC,YAAY,CAACiB,MAAM,CAAC;YACpCpB,OAAO;gBAAEQ;YAAG;YACZI,MAAM;gBAAEX,UAAU;YAAM;QAC1B;IACF;IAlEA,YAAY,AAAiBC,MAAqB,CAAE;aAAvBA,SAAAA;IAAwB;AAmEvD;;;;QAhEkBqB,SAAS;;;QACVC,QAAQ;QAAKC,aAAa;;;;;;;;;;;;QAUzBF,SAAS;;;QACVC,QAAQ;QAAKC,aAAa;;;QAC1BD,QAAQ;QAAKC,aAAa;;;;;;;;;;;;QAQzBF,SAAS;;;QACVC,QAAQ;QAAKC,aAAa;;;QAC1BD,QAAQ;QAAKC,aAAa;;;;;;;;;;;;QAQzBF,SAAS;;;QACVC,QAAQ;QAAKC,aAAa;;;QAC1BD,QAAQ;QAAKC,aAAa;;;;;;;;;;;;QAUzBF,SAAS;;;QACVC,QAAQ;QAAKC,aAAa;;;QAC1BD,QAAQ;QAAKC,aAAa;;;;;;;;;;;;;6CASpBC;;QACLH,SAAS;;;QACVC,QAAQ;QAAKC,aAAa;;;QAC1BD,QAAQ;QAAKC,aAAa"}