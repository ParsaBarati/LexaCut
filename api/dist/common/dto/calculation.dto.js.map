{"version":3,"sources":["../../../src/common/dto/calculation.dto.ts"],"sourcesContent":["import {\n  IsString,\n  IsNumber,\n  IsOptional,\n  Min,\n  IsArray,\n  ValidateNested,\n  IsNotEmpty,\n} from 'class-validator';\nimport { ApiProperty, ApiPropertyOptional } from '@nestjs/swagger';\nimport { Type } from 'class-transformer';\n\n/**\n * DTO for Project Data\n */\nexport class ProjectDataDto {\n  @ApiProperty({ description: 'Project name', example: 'Kitchen Cabinet Project' })\n  @IsString()\n  @IsNotEmpty()\n  projectName!: string;\n\n  @ApiProperty({ description: 'Client name', example: 'John Doe' })\n  @IsString()\n  @IsNotEmpty()\n  clientName!: string;\n\n  @ApiProperty({ description: 'Contract date', example: '2024-01-15' })\n  @IsString()\n  @IsNotEmpty()\n  contractDate!: string;\n\n  @ApiPropertyOptional({ description: 'Custom fields', example: { field1: 'value1' } })\n  @IsOptional()\n  customFields?: Record<string, string>;\n\n  @ApiProperty({ description: 'Waste percentage (e.g., 0.15 for 15%)', example: 0.15 })\n  @IsNumber()\n  @Min(0)\n  wastePercentage!: number;\n}\n\n/**\n * DTO for Component Data (from CSV)\n */\nexport class ComponentDataDto {\n  @ApiProperty({ description: 'Component name', example: 'Cabinet Door' })\n  @IsString()\n  @IsNotEmpty()\n  name!: string;\n\n  @ApiProperty({ description: 'Component ID', example: 'CD-001' })\n  @IsString()\n  @IsNotEmpty()\n  componentId!: string;\n\n  @ApiProperty({ description: 'Quantity', example: 4 })\n  @IsNumber()\n  @Min(1)\n  quantity!: number;\n\n  @ApiPropertyOptional({ description: 'Edge property 1', example: 'PVC' })\n  @IsOptional()\n  @IsString()\n  edge1?: string;\n\n  @ApiPropertyOptional({ description: 'Edge property 2', example: 'PVC' })\n  @IsOptional()\n  @IsString()\n  edge2?: string;\n\n  @ApiPropertyOptional({ description: 'Edge property 3' })\n  @IsOptional()\n  @IsString()\n  edge3?: string;\n\n  @ApiPropertyOptional({ description: 'Edge property 4' })\n  @IsOptional()\n  @IsString()\n  edge4?: string;\n\n  @ApiProperty({ description: 'Material type', example: 'MDF 18mm' })\n  @IsString()\n  @IsNotEmpty()\n  materialType!: string;\n\n  @ApiProperty({ description: 'Instance type', example: 'Cabinet-Standard' })\n  @IsString()\n  @IsNotEmpty()\n  instanceType!: string;\n\n  @ApiProperty({ description: 'Length in mm', example: 600 })\n  @IsNumber()\n  @Min(0)\n  length!: number;\n\n  @ApiProperty({ description: 'Width in mm', example: 400 })\n  @IsNumber()\n  @Min(0)\n  width!: number;\n\n  @ApiProperty({ description: 'Area in m²', example: 0.24 })\n  @IsNumber()\n  @Min(0)\n  area!: number;\n}\n\n/**\n * DTO for Full Calculation Request\n */\nexport class CalculateFullCostDto {\n  @ApiProperty({ description: 'Project metadata', type: ProjectDataDto })\n  @ValidateNested()\n  @Type(() => ProjectDataDto)\n  @IsNotEmpty()\n  projectData!: ProjectDataDto;\n\n  @ApiProperty({ description: 'Array of components', type: [ComponentDataDto] })\n  @IsArray()\n  @ValidateNested({ each: true })\n  @Type(() => ComponentDataDto)\n  @IsNotEmpty()\n  components!: ComponentDataDto[];\n}\n\n/**\n * DTO for Pricing Configuration Update\n */\nexport class PricingConfigDto {\n  @ApiPropertyOptional({ description: 'General overhead (0.25 = 25%)', example: 0.25 })\n  @IsOptional()\n  @IsNumber()\n  @Min(0)\n  overhead1?: number;\n\n  @ApiPropertyOptional({ description: 'Administrative overhead (0.04 = 4%)', example: 0.04 })\n  @IsOptional()\n  @IsNumber()\n  @Min(0)\n  overhead2?: number;\n\n  @ApiPropertyOptional({ description: 'Additional overhead 1 (0.02 = 2%)', example: 0.02 })\n  @IsOptional()\n  @IsNumber()\n  @Min(0)\n  overhead3?: number;\n\n  @ApiPropertyOptional({ description: 'Additional overhead 2 (0.02 = 2%)', example: 0.02 })\n  @IsOptional()\n  @IsNumber()\n  @Min(0)\n  overhead4?: number;\n\n  @ApiPropertyOptional({ description: 'Contingency (0.025 = 2.5%)', example: 0.025 })\n  @IsOptional()\n  @IsNumber()\n  @Min(0)\n  contingency?: number;\n\n  @ApiPropertyOptional({ description: 'Profit margin (0.22 = 22%)', example: 0.22 })\n  @IsOptional()\n  @IsNumber()\n  @Min(0)\n  profitMargin?: number;\n}\n\n/**\n * DTO for CSV Upload Request\n */\nexport class UploadCsvDto {\n  @ApiProperty({ description: 'Project metadata', type: ProjectDataDto })\n  @ValidateNested()\n  @Type(() => ProjectDataDto)\n  @IsNotEmpty()\n  projectData!: ProjectDataDto;\n}\n\n/**\n * DTO for Direct Part Data (from LexaCut plugin)\n */\nexport class DirectPartDto {\n  @ApiProperty({ description: 'Part number', example: '1.1' })\n  @IsString()\n  number!: string;\n\n  @ApiProperty({ description: 'Part name', example: 'Cabinet Door' })\n  @IsString()\n  @IsNotEmpty()\n  name!: string;\n\n  @ApiProperty({ description: 'Quantity/count', example: 2 })\n  @IsNumber()\n  @Min(0)\n  count!: number;\n\n  @ApiProperty({ description: 'Cutting length in mm', example: 600 })\n  @IsNumber()\n  @Min(0)\n  cutting_length!: number;\n\n  @ApiProperty({ description: 'Cutting width in mm', example: 400 })\n  @IsNumber()\n  @Min(0)\n  cutting_width!: number;\n\n  @ApiProperty({ description: 'Cutting thickness in mm', example: 18 })\n  @IsNumber()\n  @Min(0)\n  cutting_thickness!: number;\n\n  @ApiProperty({ description: 'Material name', example: 'MDF 18mm' })\n  @IsString()\n  @IsNotEmpty()\n  material_name!: string;\n\n  @ApiProperty({ description: 'Entity/instance names', example: 'Cabinet-Standard, Door-1' })\n  @IsString()\n  entity_names!: string;\n\n  @ApiPropertyOptional({ description: 'Edge ymin' })\n  @IsOptional()\n  @IsString()\n  edge_ymin?: string;\n\n  @ApiPropertyOptional({ description: 'Edge ymax' })\n  @IsOptional()\n  @IsString()\n  edge_ymax?: string;\n\n  @ApiPropertyOptional({ description: 'Edge xmin' })\n  @IsOptional()\n  @IsString()\n  edge_xmin?: string;\n\n  @ApiPropertyOptional({ description: 'Edge xmax' })\n  @IsOptional()\n  @IsString()\n  edge_xmax?: string;\n\n  @ApiProperty({ description: 'Final area in m²', example: 0.24 })\n  @IsNumber()\n  @Min(0)\n  final_area!: number;\n}\n\n/**\n * DTO for Direct Calculation Request (from LexaCut plugin API call)\n */\nexport class DirectCalculationDto {\n  @ApiProperty({ description: 'Project metadata', type: ProjectDataDto })\n  @ValidateNested()\n  @Type(() => ProjectDataDto)\n  @IsNotEmpty()\n  projectData!: ProjectDataDto;\n\n  @ApiProperty({ description: 'Array of parts from LexaCut', type: [DirectPartDto] })\n  @IsArray()\n  @ValidateNested({ each: true })\n  @Type(() => DirectPartDto)\n  @IsNotEmpty()\n  parts!: DirectPartDto[];\n}\n\n"],"names":["CalculateFullCostDto","ComponentDataDto","DirectCalculationDto","DirectPartDto","PricingConfigDto","ProjectDataDto","UploadCsvDto","description","example","field1","type","each"],"mappings":";;;;;;;;;;;QA6GaA;eAAAA;;QAjEAC;eAAAA;;QA2MAC;eAAAA;;QApEAC;eAAAA;;QApDAC;eAAAA;;QAhHAC;eAAAA;;QAyJAC;eAAAA;;;gCAhKN;yBAC0C;kCAC5B;;;;;;;;;;AAKd,IAAA,AAAMD,iBAAN,MAAMA;AAwBb;;;QAvBiBE,aAAa;QAAgBC,SAAS;;;;;;;;QAKtCD,aAAa;QAAeC,SAAS;;;;;;;;QAKrCD,aAAa;QAAiBC,SAAS;;;;;;;;QAK/BD,aAAa;QAAiBC,SAAS;YAAEC,QAAQ;QAAS;;;;;;;QAIlEF,aAAa;QAAyCC,SAAS;;;;;;AASzE,IAAA,AAAMP,mBAAN,MAAMA;AA4Db;;;QA3DiBM,aAAa;QAAkBC,SAAS;;;;;;;;QAKxCD,aAAa;QAAgBC,SAAS;;;;;;;;QAKtCD,aAAa;QAAYC,SAAS;;;;;;;;QAK1BD,aAAa;QAAmBC,SAAS;;;;;;;;QAKzCD,aAAa;QAAmBC,SAAS;;;;;;;;QAKzCD,aAAa;;;;;;;;QAKbA,aAAa;;;;;;;;QAKrBA,aAAa;QAAiBC,SAAS;;;;;;;;QAKvCD,aAAa;QAAiBC,SAAS;;;;;;;;QAKvCD,aAAa;QAAgBC,SAAS;;;;;;;;QAKtCD,aAAa;QAAeC,SAAS;;;;;;;;QAKrCD,aAAa;QAAcC,SAAS;;;;;;AAS9C,IAAA,AAAMR,uBAAN,MAAMA;AAab;;;QAZiBO,aAAa;QAAoBG,MAAML;;;oCAE1CA;;;;;;QAIGE,aAAa;QAAuBG,MAAM;YAACT;SAAiB;;;;QAEzDU,MAAM;;oCACZV;;;;AAQP,IAAA,AAAMG,mBAAN,MAAMA;AAoCb;;;QAnCyBG,aAAa;QAAiCC,SAAS;;;;;;;;;QAMvDD,aAAa;QAAuCC,SAAS;;;;;;;;;QAM7DD,aAAa;QAAqCC,SAAS;;;;;;;;;QAM3DD,aAAa;QAAqCC,SAAS;;;;;;;;;QAM3DD,aAAa;QAA8BC,SAAS;;;;;;;;;QAMpDD,aAAa;QAA8BC,SAAS;;;;;;;AAUtE,IAAA,AAAMF,eAAN,MAAMA;AAMb;;;QALiBC,aAAa;QAAoBG,MAAML;;;oCAE1CA;;;;AAQP,IAAA,AAAMF,gBAAN,MAAMA;AA+Db;;;QA9DiBI,aAAa;QAAeC,SAAS;;;;;;;QAIrCD,aAAa;QAAaC,SAAS;;;;;;;;QAKnCD,aAAa;QAAkBC,SAAS;;;;;;;;QAKxCD,aAAa;QAAwBC,SAAS;;;;;;;;QAK9CD,aAAa;QAAuBC,SAAS;;;;;;;;QAK7CD,aAAa;QAA2BC,SAAS;;;;;;;;QAKjDD,aAAa;QAAiBC,SAAS;;;;;;;;QAKvCD,aAAa;QAAyBC,SAAS;;;;;;;QAIvCD,aAAa;;;;;;;;QAKbA,aAAa;;;;;;;;QAKbA,aAAa;;;;;;;;QAKbA,aAAa;;;;;;;;QAKrBA,aAAa;QAAoBC,SAAS;;;;;;AASpD,IAAA,AAAMN,uBAAN,MAAMA;AAab;;;QAZiBK,aAAa;QAAoBG,MAAML;;;oCAE1CA;;;;;;QAIGE,aAAa;QAA+BG,MAAM;YAACP;SAAc;;;;QAE9DQ,MAAM;;oCACZR"}