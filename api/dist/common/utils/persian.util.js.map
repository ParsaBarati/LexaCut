{"version":3,"sources":["../../../src/common/utils/persian.util.ts"],"sourcesContent":["/**\n * Persian/Farsi utilities for number and date formatting\n * Supports RTL text and Persian number formatting\n */\n\n/** Persian digit mapping */\nconst PERSIAN_DIGITS = ['۰', '۱', '۲', '۳', '۴', '۵', '۶', '۷', '۸', '۹'];\n\n/** Arabic digit mapping (alternative) */\nconst ARABIC_DIGITS = ['٠', '١', '٢', '٣', '٤', '٥', '٦', '٧', '٨', '٩'];\n\n/**\n * Convert English numbers to Persian digits\n * @param num - Number or string containing numbers\n * @returns String with Persian digits\n */\nexport function toPersianDigits(num: number | string): string {\n  return String(num).replace(/\\d/g, (digit) => PERSIAN_DIGITS[parseInt(digit)]);\n}\n\n/**\n * Convert Persian/Arabic digits to English numbers\n * @param str - String containing Persian/Arabic digits\n * @returns String with English digits\n */\nexport function toEnglishDigits(str: string): string {\n  let result = str;\n  \n  // Replace Persian digits\n  PERSIAN_DIGITS.forEach((digit, index) => {\n    result = result.replace(new RegExp(digit, 'g'), String(index));\n  });\n  \n  // Replace Arabic digits\n  ARABIC_DIGITS.forEach((digit, index) => {\n    result = result.replace(new RegExp(digit, 'g'), String(index));\n  });\n  \n  return result;\n}\n\n/**\n * Format number as Persian currency (Rial)\n * Matches Excel format: \"#,###_-[$ریال-fa-IR]\"\n * \n * @param amount - Amount in Rials\n * @param includeCurrency - Whether to include \"ریال\" suffix\n * @param usePersianDigits - Whether to use Persian digits\n * @returns Formatted string\n */\nexport function formatRial(\n  amount: number,\n  includeCurrency: boolean = true,\n  usePersianDigits: boolean = true\n): string {\n  // Format with thousands separator\n  const formatted = new Intl.NumberFormat('en-US', {\n    minimumFractionDigits: 0,\n    maximumFractionDigits: 0,\n  }).format(amount);\n  \n  // Convert to Persian digits if requested\n  const digitFormatted = usePersianDigits ? toPersianDigits(formatted) : formatted;\n  \n  // Add currency suffix\n  return includeCurrency ? `${digitFormatted} ریال` : digitFormatted;\n}\n\n/**\n * Format number with Persian thousand separators\n * @param num - Number to format\n * @param decimals - Number of decimal places (default: 0)\n * @param usePersianDigits - Whether to use Persian digits\n * @returns Formatted string\n */\nexport function formatPersianNumber(\n  num: number,\n  decimals: number = 0,\n  usePersianDigits: boolean = true\n): string {\n  const formatted = new Intl.NumberFormat('en-US', {\n    minimumFractionDigits: decimals,\n    maximumFractionDigits: decimals,\n  }).format(num);\n  \n  return usePersianDigits ? toPersianDigits(formatted) : formatted;\n}\n\n/**\n * Shamsi (Jalali) calendar month names\n */\nconst SHAMSI_MONTHS = [\n  'فروردین',\n  'اردیبهشت',\n  'خرداد',\n  'تیر',\n  'مرداد',\n  'شهریور',\n  'مهر',\n  'آبان',\n  'آذر',\n  'دی',\n  'بهمن',\n  'اسفند',\n];\n\n/**\n * Convert Gregorian date to Shamsi (Jalali) date\n * Using simple algorithm (not production-ready, consider using a library)\n * \n * @param date - Gregorian Date object\n * @returns Shamsi date string\n */\nexport function toShamsiDate(date: Date): string {\n  // This is a simplified conversion\n  // For production, use a proper library like moment-jalaali\n  const year = date.getFullYear();\n  const month = date.getMonth() + 1;\n  const day = date.getDate();\n  \n  // Approximate Shamsi year (Gregorian - 621 or 622)\n  const shamsiYear = year - (month < 3 || (month === 3 && day < 21) ? 622 : 621);\n  \n  // Simplified month mapping (not accurate for all dates)\n  const monthMapping: Record<number, number> = {\n    3: 1, 4: 2, 5: 3, 6: 4, 7: 5, 8: 6,\n    9: 7, 10: 8, 11: 9, 12: 10, 1: 11, 2: 12\n  };\n  \n  const shamsiMonth = monthMapping[month] || 1;\n  \n  return `${shamsiYear}/${shamsiMonth.toString().padStart(2, '0')}/${day.toString().padStart(2, '0')}`;\n}\n\n/**\n * Format date in Persian format with Persian digits\n * @param date - Date to format\n * @param usePersianDigits - Whether to use Persian digits\n * @returns Formatted date string\n */\nexport function formatPersianDate(\n  date: Date,\n  usePersianDigits: boolean = true\n): string {\n  const shamsi = toShamsiDate(date);\n  return usePersianDigits ? toPersianDigits(shamsi) : shamsi;\n}\n\n/**\n * Get current Shamsi date string\n * @param usePersianDigits - Whether to use Persian digits\n * @returns Current Shamsi date\n */\nexport function getCurrentShamsiDate(usePersianDigits: boolean = true): string {\n  return formatPersianDate(new Date(), usePersianDigits);\n}\n\n/**\n * Format area in square meters with m² symbol\n * @param area - Area value\n * @param usePersianDigits - Whether to use Persian digits\n * @returns Formatted area string\n */\nexport function formatArea(area: number, usePersianDigits: boolean = true): string {\n  const formatted = area.toFixed(2);\n  const digitFormatted = usePersianDigits ? toPersianDigits(formatted) : formatted;\n  return `${digitFormatted} m²`;\n}\n\n/**\n * Format length in meters\n * @param length - Length value  \n * @param usePersianDigits - Whether to use Persian digits\n * @returns Formatted length string\n */\nexport function formatLength(length: number, usePersianDigits: boolean = true): string {\n  const formatted = length.toFixed(2);\n  const digitFormatted = usePersianDigits ? toPersianDigits(formatted) : formatted;\n  return `${digitFormatted} m`;\n}\n\n/**\n * Check if text contains RTL characters (Persian/Arabic)\n * @param text - Text to check\n * @returns true if contains RTL characters\n */\nexport function isRTL(text: string): boolean {\n  const rtlRegex = /[\\u0600-\\u06FF\\u0750-\\u077F\\u08A0-\\u08FF\\uFB50-\\uFDFF\\uFE70-\\uFEFF]/;\n  return rtlRegex.test(text);\n}\n\n/**\n * Add RTL marker to text if needed\n * @param text - Text to mark\n * @returns Text with RTL marker if contains RTL characters\n */\nexport function markRTL(text: string): string {\n  return isRTL(text) ? `\\u200F${text}` : text;\n}\n\n"],"names":["formatArea","formatLength","formatPersianDate","formatPersianNumber","formatRial","getCurrentShamsiDate","isRTL","markRTL","toEnglishDigits","toPersianDigits","toShamsiDate","PERSIAN_DIGITS","ARABIC_DIGITS","num","String","replace","digit","parseInt","str","result","forEach","index","RegExp","amount","includeCurrency","usePersianDigits","formatted","Intl","NumberFormat","minimumFractionDigits","maximumFractionDigits","format","digitFormatted","decimals","SHAMSI_MONTHS","date","year","getFullYear","month","getMonth","day","getDate","shamsiYear","monthMapping","shamsiMonth","toString","padStart","shamsi","Date","area","toFixed","length","text","rtlRegex","test"],"mappings":"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"}